<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modern House Construction Cost Estimator for India</title>

    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://www.google.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Custom Styles -->
    <style>
      :root {
        --brand-color: #f97316; /* Orange */
        --brand-color-hover: #ea580c;
        --brand-color-light: #fff7ed;
        --success-color: #16a34a;
        --text-primary: #111827;
        --text-secondary: #374151;
        --text-light: #6b7280;
        --bg-body: #f8fafc;
        --bg-card: #ffffff;
        --border-color: #d1d5db;
        --border-radius-lg: 0.75rem;
      }

      body {
        font-family: "Roboto", sans-serif;
        background-color: var(--bg-body);
        color: var(--text-secondary);
        margin: 0;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .container {
        max-width: 56rem;
        margin: 0 auto;
        padding: 1rem;
      }

      header {
        text-align: center;
        margin-bottom: 2rem;
      }
      header h1 {
        font-size: 1.875rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
      }

      main {
        background-color: var(--bg-card);
        padding: 1.5rem;
        border-radius: 1.5rem;
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1),
          0 4px 6px -4px rgb(0 0 0 / 0.1);
      }

      .step-navigation {
        display: flex;
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 2rem;
      }
      .step-btn {
        flex: 1;
        padding: 0.75rem 0;
        text-align: center;
        font-weight: 600;
        border: none;
        border-bottom: 2px solid transparent;
        background: none;
        cursor: default;
        color: var(--text-light);
      }
      .step-btn.active {
        color: var(--brand-color);
        border-bottom-color: var(--brand-color);
      }

      .step {
        display: none;
      }
      .step.active {
        display: block;
      }

      h2 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
      }
      label {
        display: block;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-secondary);
        margin-bottom: 0.25rem;
      }

      input,
      select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius-lg);
        box-sizing: border-box;
        transition: box-shadow 0.2s, border-color 0.2s;
      }
      input:focus,
      select:focus {
        outline: none;
        border-color: var(--brand-color);
        box-shadow: 0 0 0 2px var(--brand-color-light);
      }

      .btn {
        border: none;
        font-weight: 600;
        padding: 0.75rem 1.5rem;
        border-radius: var(--border-radius-lg);
        cursor: pointer;
        transition: background-color 0.2s;
      }
      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .btn-primary {
        background-color: var(--brand-color);
        color: white;
      }
      .btn-primary:hover {
        background-color: var(--brand-color-hover);
      }
      .btn-secondary {
        background-color: #e5e7eb;
        color: var(--text-secondary);
      }
      .btn-secondary:hover {
        background-color: #d1d5db;
      }
      .btn-submit {
        background-color: var(--success-color);
        color: white;
        font-weight: 700;
      }

      .form-navigation {
        margin-top: 2.5rem;
        display: flex;
        justify-content: space-between;
      }
      .hidden {
        display: none;
      }

      .form-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      .quality-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }
      .quality-option {
        padding: 1rem;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius-lg);
        cursor: pointer;
        text-align: center;
      }
      .quality-option h3 {
        margin: 0 0 0.5rem 0;
      }
      .quality-option p {
        font-size: 0.875rem;
        color: var(--text-light);
        margin: 0;
      }
      .quality-option:has(input:checked) {
        background-color: var(--brand-color-light);
        border-color: var(--brand-color);
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* Results Section */
      #results {
        margin-top: 2.5rem;
      }
      .results-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      .results-card {
        background-color: var(--bg-card);
        padding: 2rem;
        border-radius: 1.5rem;
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1),
          0 4px 6px -4px rgb(0 0 0 / 0.1);
      }
      .results-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2rem;
        align-items: center;
      }
      .chart-container {
        max-width: 24rem;
        width: 100%;
        margin: 0 auto;
      }
      #grandTotal {
        font-size: 3rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
      }
      .summary-item {
        display: flex;
        justify-content: space-between;
        font-size: 1.125rem;
      }
      .summary-item + .summary-item {
        margin-top: 0.75rem;
      }
      .summary-item span:first-child {
        color: var(--text-light);
      }
      .summary-item span:last-child {
        font-weight: 600;
        color: var(--text-secondary);
      }
      .detailed-breakdown-container {
        margin-top: 2rem;
        border-top: 1px solid var(--border-color);
        padding-top: 1.5rem;
      }

      @media (min-width: 640px) {
        .form-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (min-width: 768px) {
        .results-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header><h1>House Construction Cost Estimator</h1></header>

      <main>
        <div class="step-navigation">
          <button id="step-btn-1" class="step-btn active">
            1. Area Details
          </button>
          <button id="step-btn-2" class="step-btn">
            2. Construction Quality
          </button>
          <button id="step-btn-3" class="step-btn">3. Other Costs</button>
        </div>

        <form id="constructionForm">
          <!-- Step 1: Area Details -->
          <div id="step-1" class="step active">
            <h2>Plot & Built-up Area</h2>
            <p>
              Enter the total plot area and the desired built-up area for your
              house.
            </p>
            <div class="form-grid">
              <div>
                <label for="plotArea">Plot Area (sq.ft.)</label
                ><input type="number" id="plotArea" value="1200" />
              </div>
              <div>
                <label for="builtUpArea">Total Built-up Area (sq.ft.)</label
                ><input type="number" id="builtUpArea" value="2000" />
              </div>
              <div>
                <label for="numFloors">Number of Floors</label
                ><input type="number" id="numFloors" value="2" />
              </div>
            </div>
          </div>

          <!-- Step 2: Quality -->
          <div id="step-2" class="step">
            <h2>Construction Quality</h2>
            <p>
              Select the desired quality of construction. This determines the
              per square foot rate.
            </p>
            <div class="quality-grid">
              <label class="quality-option">
                <input
                  type="radio"
                  name="constructionQuality"
                  value="basic"
                  class="sr-only"
                  checked
                />
                <h3>Basic Quality</h3>
                <p>Approx. ₹1,600 / sq.ft.</p>
              </label>
              <label class="quality-option">
                <input
                  type="radio"
                  name="constructionQuality"
                  value="mid"
                  class="sr-only"
                />
                <h3>Mid-Range Quality</h3>
                <p>Approx. ₹1,900 / sq.ft.</p>
              </label>
              <label class="quality-option">
                <input
                  type="radio"
                  name="constructionQuality"
                  value="premium"
                  class="sr-only"
                />
                <h3>Premium Quality</h3>
                <p>Approx. ₹2,400 / sq.ft.</p>
              </label>
            </div>
          </div>

          <!-- Step 3: Other Costs -->
          <div id="step-3" class="step">
            <h2>Additional Costs (Optional)</h2>
            <p>
              Include estimated costs for permissions, architect fees, and
              utilities if known.
            </p>
            <div class="form-grid">
              <div>
                <label for="permissionFees"
                  >Permission & Approval Fees (₹)</label
                ><input type="number" id="permissionFees" value="80000" />
              </div>
              <div>
                <label for="architectFees">Architect Fees (%)</label
                ><input type="number" id="architectFees" value="8" />
              </div>
            </div>
          </div>

          <div class="form-navigation">
            <button
              type="button"
              id="prevBtn"
              class="btn btn-secondary"
              disabled
            >
              Previous
            </button>
            <button type="button" id="nextBtn" class="btn btn-primary">
              Next
            </button>
            <button type="submit" id="submitBtn" class="btn btn-submit hidden">
              Calculate Budget
            </button>
          </div>
        </form>
      </main>

      <section id="results" class="hidden"></section>

      <div
        style="
          text-align: center;
          font-size: 0.875rem;
          color: var(--text-light);
          margin-top: 2.5rem;
          padding: 1.5rem;
          background-color: var(--bg-card);
          border-radius: var(--border-radius-lg);
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
            0 2px 4px -2px rgb(0 0 0 / 0.1);
        "
      >
        <strong>Disclaimer:</strong> Costs and prices might vary based on
        location and current market conditions. We strive to provide accurate
        estimates, but please verify with the current market situation.
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentStep = 1,
          totalSteps = 3,
          chartInstance = null,
          lastCalculationData = null;

        const costData = {
          perSqFtRate: { basic: 1600, mid: 1900, premium: 2400 },
          breakdownPercentage: {
            foundation: 0.15,
            structure: 0.3, // RCC, Walls, etc.
            finishing: 0.25, // Plastering, Flooring, Painting
            doorsWindows: 0.1,
            electricalPlumbing: 0.15,
            misc: 0.05,
          },
        };

        function updateStepVisibility() {
          document
            .querySelectorAll(".step")
            .forEach((s, i) =>
              s.classList.toggle("active", i + 1 === currentStep)
            );
          document
            .querySelectorAll(".step-btn")
            .forEach((b, i) => b.classList.toggle("active", i < currentStep));
          document.getElementById("prevBtn").disabled = currentStep === 1;
          document
            .getElementById("nextBtn")
            .classList.toggle("hidden", currentStep === totalSteps);
          document
            .getElementById("submitBtn")
            .classList.toggle("hidden", currentStep !== totalSteps);
        }

        function calculateBudget(e) {
          e.preventDefault();
          const builtUpArea =
            parseFloat(document.getElementById("builtUpArea").value) || 0;
          const quality = document.querySelector(
            'input[name="constructionQuality"]:checked'
          ).value;
          const permissionFees =
            parseFloat(document.getElementById("permissionFees").value) || 0;
          const architectFeePercent =
            parseFloat(document.getElementById("architectFees").value) || 0;

          const rate = costData.perSqFtRate[quality];
          const baseConstructionCost = builtUpArea * rate;

          const breakdown = {};
          for (const stage in costData.breakdownPercentage) {
            breakdown[stage] =
              baseConstructionCost * costData.breakdownPercentage[stage];
          }

          const architectFees =
            baseConstructionCost * (architectFeePercent / 100);
          const grandTotal =
            baseConstructionCost + permissionFees + architectFees;

          lastCalculationData = {
            grandTotal,
            baseConstructionCost,
            breakdown,
            permissionFees,
            architectFees,
            builtUpArea,
          };
          displayResults(lastCalculationData);
        }

        function displayResults(data) {
          const resultsSection = document.getElementById("results");
          resultsSection.innerHTML = `
                    <header class="results-header"><h2>Your Estimated Budget</h2><button id="downloadPdfBtn" class="btn btn-primary">Download PDF</button></header>
                    <div class="results-card">
                        <div class="results-grid">
                            <div class="chart-container"><canvas id="costChart"></canvas></div>
                            <div>
                                <p>Total Estimated Cost</p><p id="grandTotal">₹${Math.round(
                                  data.grandTotal
                                ).toLocaleString("en-IN")}</p>
                                <div class="summary-details">
                                    <div class="summary-item"><span>Base Construction Cost:</span><span>₹${Math.round(
                                      data.baseConstructionCost
                                    ).toLocaleString("en-IN")}</span></div>
                                    <div class="summary-item"><span>Architect & Approval Fees:</span><span>₹${Math.round(
                                      data.architectFees + data.permissionFees
                                    ).toLocaleString("en-IN")}</span></div>
                                </div>
                            </div>
                        </div>
                        <div class="detailed-breakdown-container">
                            <h3>Construction Stage Breakdown</h3>
                            ${Object.entries(data.breakdown)
                              .map(
                                ([key, value]) => `
                                <div class="summary-item">
                                    <span style="text-transform: capitalize;">${key.replace(
                                      /([A-Z])/g,
                                      " $1"
                                    )}</span>
                                    <span>₹${Math.round(value).toLocaleString(
                                      "en-IN"
                                    )}</span>
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>`;
          resultsSection.classList.remove("hidden");
          document
            .getElementById("downloadPdfBtn")
            .addEventListener("click", generatePDF);
          window.scrollTo({
            top: resultsSection.offsetTop - 20,
            behavior: "smooth",
          });

          const chartLabels = Object.keys(data.breakdown).map((k) =>
            k
              .replace(/([A-Z])/g, " $1")
              .replace(/^./, (str) => str.toUpperCase())
          );
          const chartData = Object.values(data.breakdown);
          renderChart(chartLabels, chartData);
        }

        function renderChart(labels, data) {
          const ctx = document.getElementById("costChart").getContext("2d");
          if (chartInstance) chartInstance.destroy();
          chartInstance = new Chart(ctx, {
            type: "doughnut",
            data: {
              labels: labels,
              datasets: [
                {
                  data: data,
                  backgroundColor: [
                    "#A52A2A",
                    "#808080",
                    "#ADD8E6",
                    "#DEB887",
                    "#4682B4",
                    "#C0C0C0",
                  ],
                  borderColor: "#ffffff",
                  borderWidth: 4,
                },
              ],
            },
            options: {
              responsive: true,
              cutout: "70%",
              plugins: {
                legend: {
                  position: "bottom",
                  labels: { padding: 20, font: { size: 12 } },
                },
              },
            },
          });
        }

        function generatePDF() {
          if (!lastCalculationData) return;
          const { jsPDF } = window.jspdf;
          const doc = new jsPDF();
          const data = lastCalculationData;
          const today = new Date().toLocaleDateString("en-IN");

          doc.setFontSize(20);
          doc.text("House Construction Estimation", 105, 20, {
            align: "center",
          });
          doc.setFontSize(12);
          doc.setTextColor(100);
          doc.text(`Generated on: ${today}`, 105, 28, { align: "center" });

          let y = 45;
          doc.setFontSize(16);
          doc.setTextColor(0);
          doc.text("Overall Summary", 20, y);
          doc.line(20, y + 2, 190, y + 2);
          y += 12;

          doc.setFontSize(12);
          doc.text("Total Estimated Cost:", 20, y);
          doc.text(
            `₹${Math.round(data.grandTotal).toLocaleString("en-IN")}`,
            190,
            y,
            { align: "right" }
          );
          y += 8;
          doc.text(`Base Cost (${data.builtUpArea} sq.ft.):`, 20, y);
          doc.text(
            `₹${Math.round(data.baseConstructionCost).toLocaleString("en-IN")}`,
            190,
            y,
            { align: "right" }
          );
          y += 8;
          doc.text("Permission Fees:", 20, y);
          doc.text(
            `₹${Math.round(data.permissionFees).toLocaleString("en-IN")}`,
            190,
            y,
            { align: "right" }
          );
          y += 8;
          doc.text("Architect Fees:", 20, y);
          doc.text(
            `₹${Math.round(data.architectFees).toLocaleString("en-IN")}`,
            190,
            y,
            { align: "right" }
          );

          y += 15;
          doc.setFontSize(16);
          doc.text("Stage-wise Breakdown", 20, y);
          doc.line(20, y + 2, 190, y + 2);
          y += 12;
          doc.setFontSize(10);
          Object.entries(data.breakdown).forEach(([key, value]) => {
            const label = key
              .replace(/([A-Z])/g, " $1")
              .replace(/^./, (str) => str.toUpperCase());
            doc.text(`- ${label}:`, 20, y);
            doc.text(`₹${Math.round(value).toLocaleString("en-IN")}`, 190, y, {
              align: "right",
            });
            y += 7;
          });

          doc.save(`House-Construction-Estimation-${Date.now()}.pdf`);
        }

        document.getElementById("prevBtn").addEventListener("click", () => {
          if (currentStep > 1) {
            currentStep--;
            updateStepVisibility();
          }
        });
        document.getElementById("nextBtn").addEventListener("click", () => {
          if (currentStep < totalSteps) {
            currentStep++;
            updateStepVisibility();
          }
        });
        document
          .getElementById("constructionForm")
          .addEventListener("submit", calculateBudget);

        updateStepVisibility();
      });
    </script>
  </body>
</html>
